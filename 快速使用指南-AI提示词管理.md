# 快速使用指南 - AI提示词管理

## 🎯 目标

本指南帮助您快速上手AI提示词管理功能，特别是如何编辑和自定义趋势分析的AI提示词。

## 📱 访问步骤

### 1. 登录系统

```
访问: http://localhost:3000
用户名: admin
密码: [您的密码]
```

### 2. 进入设置页面

点击页面右上角的 **⚙️ 设置** 按钮

### 3. 选择AI提示词管理

在左侧导航栏中点击 **🤖 AI提示词管理**

## 📊 趋势分析提示词位置

在AI提示词管理页面中，您会看到按类别分组的提示词卡片：

```
🔮 预测分析
├── 大盘预测（六壬）
├── 股票趋势预测（六壬）  ← 六壬预测法使用
└── 趋势分析（技术面）     ← 技术分析使用
```

## ✏️ 编辑提示词的3个步骤

### 步骤1: 找到要编辑的提示词

在"🔮 预测分析"类别下找到：
- **趋势分析（技术面）** - 用于"分析"页签的趋势分析
- **股票趋势预测（六壬）** - 用于"预测"页签的六壬趋势预测

### 步骤2: 点击编辑按钮

点击提示词卡片上的 **✏️ 编辑** 按钮

### 步骤3: 在弹出的编辑器中修改

编辑器包含三个主要区域：

#### 区域1: 基本信息（只读）
- 场景名称
- 场景类型
- 类别

#### 区域2: 可编辑内容
- **系统提示词**: 定义AI的角色和行为
- **用户提示词模板**: 定义具体的分析要求
- **描述**: 提示词的功能说明

#### 区域3: 可用变量（参考）
显示该场景可以使用的所有变量

## 💡 编辑技巧

### 技巧1: 使用变量

在提示词中使用 `{变量名}` 格式引用变量：

```markdown
请分析股票 **{stock_name}（{stock_code}）** 在 {prediction_date} 的走势
```

### 技巧2: 使用Markdown格式

提示词支持Markdown，可以使用：

```markdown
## 1. 技术面分析
- **趋势判断**: 当前趋势是什么
- **关键价位**: 支撑位和压力位

## 2. 交易建议
1. 买入时机
2. 止损位设置
3. 目标价位
```

### 技巧3: 分层次提出要求

```markdown
请从以下维度进行分析：

## 必须包含的内容
1. 技术面分析
2. 风险评估
3. 操作建议

## 输出格式要求
- 使用Markdown格式
- 结构清��，层次分明
- 结论明确，可操作性强
```

## 🔄 实时生效

保存修改后，新的提示词会**立即生效**，无需重启服务器：

1. 点击 **💾 保存修改** 按钮
2. 等待提示"保存成功"
3. 关闭编辑器
4. 立即在功能页面测试新提示词

## 📋 两个趋势分析提示词对比

### 趋势分析（技术面）

**使用位置**: 分析 → 趋势分析
**分析方式**: AI技术分析
**输入**: 股票代码
**可用变量**:
```
- {stock_code}          股票代码
- {stock_name}          股票名称
- {prediction_date}     预测日期
- {trading_day_status}  当前交易日/下一交易日
```

**适用场景**:
- 快速技术面分析
- 基于现代技术指标
- 适合日常使用

### 股票趋势预测（六壬）

**使用位置**: 预测 → 趋势预测
**分析方式**: 六壬排盘 + AI解读
**输入**: 股票代码 + 排盘时间
**可用变量**:
```
- {stock_code}          股票代码
- {stock_name}          股票名称
- {prediction_time}     预测时间
- {day_ganzhi}          日干支
- {hour_ganzhi}         时干支
- {month_jiang}         月将
- {sike}                四课
- {sanchuan}            三传
- {twelve_gods}         十二神
```

**适用场景**:
- 重要决策参考
- 结合传统智慧
- 需要深度分析

## 🎨 自定义示例

### 示例1: 简化版趋势分析

```markdown
### 系统提示词
你是一位A股分析师，擅长快速判断股票走势。

### 用户提示词模板
分析 {stock_name}（{stock_code}）：

1. **趋势**: 上涨/下跌/震荡
2. **关键价位**: 支撑 ___ 元，压力 ___ 元
3. **建议**: 买入/持有/卖出

简洁明了，不超过200字。
```

### 示例2: 详细版趋势分析

```markdown
### 系统提示词
你是资深技术分析专家，精通K线形态、均线系统、量价关系。

### 用户提示词模板
请对 {stock_name}（{stock_code}）进行全面的技术分析：

## 1. K线形态分析
- 近期K线组合特征
- 形态信号强度

## 2. 均线系统
- 5日、10日、20日均线排列
- 均线支撑压力分析

## 3. 量价关系
- 成交量变化趋势
- 量价配合情况

## 4. 技术指标
- MACD: 金叉/死叉
- KDJ: 超买/超卖
- RSI: 强弱判断

## 5. 综合判断
- 多空力量对比
- 趋势延续概率
- 关键价位标注

## 6. 操作建议
- 买入/持有/卖出
- 止损位设置
- 目标价位区间

输出要求:
- Markdown格式
- 数据具体
- 结论明确
```

## ⚙️ 高级功能

### 启用/禁用提示词

在提示词卡片上点击：
- **✅ 启用** - 提示词生效
- **🚫 禁用** - 提示词停用（系统使用默认提示词）

### 查看使用情况

编辑器顶部显示：
- 场景类型（scene_type）
- 使用该提示词的功能模块
- 可用变量列表

### 导出和备份

```bash
# 导出当前所有提示词
node -e "const {db} = require('./database/connection'); console.log(JSON.stringify(db.prepare('SELECT * FROM ai_prompt_templates').all(), null, 2))" > prompts-backup.json
```

## 🔧 故障排除

### 问题: 修改后不生效

**解决方案**:
1. 刷新浏览器页面（Ctrl + F5）
2. 清除浏览器缓存
3. 检查提示词是否已启用
4. 查看浏览器控制台错误信息

### 问题: 变量未替换

**检查清单**:
- ✓ 变量名拼写正确
- ✓ 使用 `{变量名}` 格式
- ✓ 变量在可用列表中
- ✓ 后端代码传递了该变量

### 问题: AI输出质量下降

**优化建议**:
1. 增加系统提示词的角色描述
2. 在用户提示词中提供更详细的要求
3. 添加输出格式示例
4. 明确禁止事项和注意事项

## 📚 学习资源

### 提示词工程最佳实践

1. **明确角色定位**
   ```
   你是一位... 擅长... 精通...
   ```

2. **结构化输出**
   ```
   请从以下维度分析：
   1. ...
   2. ...
   3. ...
   ```

3. **具体化要求**
   ```
   - 涨跌幅用百分比表示
   - 价位精确到小数点后2位
   - 时间使用YYYY-MM-DD格式
   ```

4. **添加约束条件**
   ```
   注意事项：
   - 不超过500字
   - 使用Markdown格式
   - 结论必须明确
   ```

### 相关文档

- [AI提示词管理说明.md](./AI提示词管理说明.md) - 完整功能文档
- [test-ai-prompts.js](./test-ai-prompts.js) - 测试和验证脚本

## 🎉 开始使用

1. 登录系统: http://localhost:3000
2. 进入设置 → AI提示词管理
3. 找到"趋势分析（技术面）"
4. 点击"✏️ 编辑"
5. 修改提示词
6. 保存并测试

祝您���用愉快！如有问题，请查看服务器日志或浏览器控制台。
